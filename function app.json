{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "appInsightsComponent_FunctionApp2_name": {
      "type": "string"
    },
    "appInsightsComponentName_FunctionApp2_locationId": {
      "type": "string"
    },
    "appInsightsComponentName_FunctionApp2_type": {
      "type": "string"
    },
    "appInsightsComponentName_FunctionApp2_hockeyAppToken": {
      "type": "string"
    },
    "appInsightsComponentName_FunctionApp2_requestSource": {
      "type": "string"
    },
    "appInsightsComponentName_FunctionApp2_logAnalyticsName": {
      "type": "string"
    },
    "logAnalytics_FunctionApp2_name": {
      "type": "string"
    },
    "logAnalytics_FunctionApp2_LocationId": {
      "type": "string"
    }
  },
  "resources": [
    {
      "type": "microsoft.insights/components",
      "apiVersion": "2020-02-02",
      "properties": {
        "ApplicationId": "[parameters('appInsightsComponent_FunctionApp2_name')]",
        "Application_Type": "[parameters('appInsightsComponentName_FunctionApp2_type')]",
        "HockeyAppToken": "[parameters('appInsightsComponentName_FunctionApp2_hockeyAppToken')]",
        "HockeyAppId": "[parameters('appInsightsComponentName_FunctionApp2_hockeyAppToken')]",
        "Flow_Type": "Redfield",
        "Request_Source": "[parameters('appInsightsComponentName_FunctionApp2_requestSource')]"
      },
      "name": "[parameters('appInsightsComponent_FunctionApp2_name')]",
      "location": "[parameters('appInsightsComponentName_FunctionApp2_locationId')]",
      "dependsOn": [
        "[resourceId('Microsoft.OperationalInsights/workspaces', parameters('logAnalytics_FunctionApp2_name'))]"
      ]
    },
    {
      "apiVersion": "2017-03-15-preview",
      "type": "Microsoft.OperationalInsights/workspaces",
      "properties": {
        "sku": {
          "name": "pergb2018"
        }
      },
      "name": "[parameters('logAnalytics_FunctionApp2_name')]",
      "location": "[parameters('logAnalytics_FunctionApp2_LocationId')]"
    }
  ]
}